<!-- we use the favorite_for method we created in User. We collect the favorite it returns to use later.
This syntax, which relies on the fact that most objects are "truthy", while nil is not, allows us to both test a condition and get a return value in one line -->
<% if favorite = current_user.favorite_for(post) %>
<!-- If there is a favorite for the current user and the post, we display a link to unfavorite the post.
We also take advantage of the fact that link_to can take a block argument of HTML, allowing us to give our link an icon and label -->
  <%= link_to [post, favorite], class: 'btn btn-danger', method: :delete do %>
    <i class="glyphicon glyphicon-star-empty"></i>&nbsp; Unfavorite
    <% end %>
  <% else %>
    <%= link_to [post, Favorite.new], class: 'btn btn-primary', method: :post do %>
      <i class="glyphicon glyphicon-star"></i>&nbsp; Favorite
    <% end %>
  <% end %>
